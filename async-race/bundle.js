(()=>{"use strict";var t={56:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},72:t=>{var n=[];function e(t){for(var e=-1,r=0;r<n.length;r++)if(n[r].identifier===t){e=r;break}return e}function r(t,r){for(var i={},s=[],a=0;a<t.length;a++){var c=t[a],d=r.base?c[0]+r.base:c[0],u=i[d]||0,l="".concat(d," ").concat(u);i[d]=u+1;var p=e(l),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(h);else{var f=o(h,r);r.byIndex=a,n.splice(a,0,{identifier:l,updater:f,references:1})}s.push(l)}return s}function o(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var a=e(i[s]);n[a].references--}for(var c=r(t,o),d=0;d<i.length;d++){var u=e(i[d]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}i=c}}},113:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},125:(t,n,e)=>{e.d(n,{A:()=>a});var r=e(601),o=e.n(r),i=e(314),s=e.n(i)()(o());s.push([t.id,".pagination-container {\n  display: flex;\n  gap: 20px;\n  align-items: center;\n\n  margin: 0 auto;\n  padding: 20px;\n\n  font-family: Arial, sans-serif;\n}\n\np {\n  color: #fff;\n}\n\n.title {\n  font-size: 24px;\n}\n",""]);const a=s},185:(t,n,e)=>{e.d(n,{A:()=>a});var r=e(601),o=e.n(r),i=e(314),s=e.n(i)()(o());s.push([t.id,".input-container {\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  font-family: Arial, sans-serif;\n}\n\n.create,\n.update {\n  display: flex;\n  gap: 20px;\n  align-items: center;\n  padding: 20px;\n}\n\ninput {\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.input-color {\n  padding: 0;\n}\n",""]);const a=s},208:(t,n,e)=>{e.d(n,{A:()=>a});var r=e(601),o=e.n(r),i=e(314),s=e.n(i)()(o());s.push([t.id,"html {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  background-color: black;\n}\n",""]);const a=s},314:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",r=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),r&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),r&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var d=0;d<t.length;d++){var u=[].concat(t[d]);r&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),e&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=e):u[2]=e),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),n.push(u))}},n}},331:(t,n,e)=>{e.d(n,{A:()=>a});var r=e(601),o=e.n(r),i=e(314),s=e.n(i)()(o());s.push([t.id,".navigation-container {\n  display: flex;\n  gap: 20px;\n  align-items: center;\n  justify-content: center;\n\n  margin: 0 auto;\n  padding: 20px;\n\n  font-family: Arial, sans-serif;\n\n  background-color: grey;\n}\n\nbutton {\n  cursor: pointer;\n\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n\n  font-size: 16px;\n  color: #fff;\n\n  background-color: #4a5560;\n  box-shadow: 0 0 4px 4px #d2d6df;\n\n  transition: background-color 0.3s ease;\n}\n\nbutton:hover {\n  box-shadow: none;\n}\n\nbutton[disabled] {\n  pointer-events: none;\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n",""]);const a=s},378:(t,n,e)=>{e.d(n,{A:()=>a});var r=e(601),o=e.n(r),i=e(314),s=e.n(i)()(o());s.push([t.id,".dialog {\n  width: 400px;\n  max-width: 90%;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n\n  background-color: grey;\n}\n\n.dialog::backdrop {\n  background-color: rgb(0 0 0 / 50%);\n}\n\n.content {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  align-items: center;\n\n  text-align: center;\n}\n\n.message {\n  margin: 0;\n  font-size: 16px;\n  color: #fff;\n}\n",""]);const a=s},396:(t,n,e)=>{e.d(n,{A:()=>a});var r=e(601),o=e.n(r),i=e(314),s=e.n(i)()(o());s.push([t.id,".cars-container {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.car-container {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 10px;\n}\n\n.controls-row {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n}\n\n.select-button,\n.remove-button,\n.play-button,\n.stop-button {\n  padding: 3px 12px;\n}\n\n.car-name {\n  font-size: 16px;\n  color: #fff;\n}\n\n.race-row {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  justify-content: space-between;\n\n  border-bottom: 2px dotted #ccc;\n}\n\n.icon {\n  margin: 0;\n  font-size: 70px;\n}\n\n.flag-icon {\n  margin: 0;\n  margin-right: 115px;\n  font-size: 50px;\n}\n\nsvg {\n  padding-right: 40px;\n}\n",""]);const a=s},510:(t,n,e)=>{e.d(n,{A:()=>a});var r=e(601),o=e.n(r),i=e(314),s=e.n(i)()(o());s.push([t.id,".control-container {\n  display: flex;\n  gap: 20px;\n  align-items: center;\n\n  margin: 0 auto;\n  padding: 20px;\n\n  font-family: Arial, sans-serif;\n}\n",""]);const a=s},514:(t,n,e)=>{e.d(n,{A:()=>a});var r=e(601),o=e.n(r),i=e(314),s=e.n(i)()(o());s.push([t.id,".winners-table {\n  border-collapse: collapse;\n\n  width: 50%;\n  margin: 20px 10px;\n\n  font-size: 16px;\n  text-align: left;\n}\n\n.winners-table tbody,\n.winners-table thead {\n  color: #fff;\n}\n\n.winners-table th,\n.winners-table td {\n  padding: 8px;\n  border: 1px solid #ddd;\n}\n\n.car-winners svg {\n  width: 30px;\n  height: 30px;\n}\n\n.wins-button,\n.best-button {\n  cursor: pointer;\n}\n",""]);const a=s},540:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var n={};t.exports=function(t,e){var r=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var o=void 0!==e.layer;o&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,o&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var i=e.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,exports:{}};return t[r](i,i.exports,e),i.exports}function r(t){if(null===t)throw new Error("element is null");return t}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.nc=void 0;const o=[];class i{constructor(t,n="main",e="",i=""){this.buttons=[];const s=document.createElement(n);s.className=e,s.textContent=i,this.node=s;try{r(t).append(this.node)}catch(t){console.error("_parentNode is null",t)}o.push(this)}setAttribute(t,n){this.node.setAttribute(t,n)}removeAttribute(t){this.node.removeAttribute(t)}setCallback(t,n){this.node.addEventListener(t,n)}destroy(){this.node.remove()}offAllButtons(){for(const t of this.buttons)t.setAttribute("disabled","")}onAllButtons(){for(const t of this.buttons)t.removeAttribute("disabled")}}var s=e(72),a=e.n(s),c=e(825),d=e.n(c),u=e(659),l=e.n(u),p=e(56),h=e.n(p),f=e(540),v=e.n(f),b=e(113),g=e.n(b),y=e(331),w={};w.styleTagTransform=g(),w.setAttributes=h(),w.insert=l().bind(null,"head"),w.domAPI=d(),w.insertStyleElement=v(),a()(y.A,w),y.A&&y.A.locals&&y.A.locals;const m={currentView:"garage"},x=t=>{Object.assign(m,t)};class A extends i{constructor(t,n){super(t,"div","navigation-container"),this.createNavigation(n)}createNavigation(t){const n=new i(this.node,"button","garage-button","To Garage");this.buttons.push(n.node),n.setCallback("click",(()=>{x({currentView:"garage"}),t()}));const e=new i(this.node,"button","winners-button","To Winners");this.buttons.push(e.node),e.setCallback("click",(()=>{x({currentView:"winners"}),t()}))}}const C={cars:[],currentPage:1,totalCars:0},E=[],P=t=>{Object.assign(C,t);for(const t of E)t()},k=t=>{E.push(t)},$={createInput:"",createInputColor:"#ffffff",updateInput:"",updateInputColor:"#ffffff",updateState:"true",idCar:""},T=[],I=t=>{Object.assign($,t);for(const t of T)t()},S={};function M(t){return null!==t&&"object"==typeof t&&"id"in t&&"name"in t&&"color"in t}var H=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))};const N="http://127.0.0.1:3000",j=(...t)=>H(void 0,[...t],void 0,(function*(t=C.currentPage){try{const n=yield fetch(`${N}/garage?_page=${t}&_limit=7`),e=Number(n.headers.get("X-Total-Count"));if(!n.ok)throw new Error(`Error fetching cars: ${n.status}`);const r=yield n.json();!function(t){return Array.isArray(t)&&t.every((t=>"object"==typeof t&&"id"in t&&"name"in t&&"color"in t))}(r)?P({cars:[],totalCars:0}):P({cars:r,totalCars:e})}catch(t){P({cars:[],totalCars:0}),console.error("Error:",t)}})),W=t=>H(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${N}/garage/${t}`);if(!n.ok)throw new Error(`Error fetching car: ${n.status}`);const e=yield n.json();return M(e)?e:void 0}catch(t){return void console.error("Error:",t)}})),B=t=>H(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${N}/garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Error fetching cars: ${n.status}`);const e=yield n.json();return M(e)?e:void 0}catch(t){return void console.error("Error:",t)}}));var L=e(396),O={};O.styleTagTransform=g(),O.setAttributes=h(),O.insert=l().bind(null,"head"),O.domAPI=d(),O.insertStyleElement=v(),a()(L.A,O),L.A&&L.A.locals&&L.A.locals;class z{static createSvg(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","50"),t.setAttribute("height","50"),t.setAttribute("viewBox","0 0 46.081 46.082");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M43.056,29.816v-0.877c0-3.478-2.806-6.277-6.282-6.277l0,0c-1.054,0-2.021-0.583-2.524-1.507l-3.381-6.194\n\t\t\t\tc-0.507-0.926-1.479-1.502-2.531-1.5L8.86,13.495c-0.863,0.001-1.681,0.39-2.227,1.061l-4.032,4.955\n\t\t\t\tc-1.631,2.003-2.183,4.676-1.48,7.163l0.905,3.202c-0.421,0.15-0.81,0.395-1.132,0.716C0.322,31.162,0,31.94,0,32.748\n\t\t\t\tc0,1.683,1.362,3.046,3.044,3.049l1.559,0.002c-0.004,0.095-0.008,0.188-0.008,0.28c0,2.953,2.394,5.347,5.347,5.347\n\t\t\t\tc2.954,0,5.347-2.394,5.347-5.347c0-0.088-0.003-0.177-0.006-0.265l11.68,0.018c-0.003,0.082-0.005,0.165-0.005,0.248\n\t\t\t\tc0,2.953,2.392,5.346,5.347,5.346c2.952,0,5.347-2.393,5.347-5.346c0-0.078-0.004-0.154-0.007-0.231l5.46-0.009\n\t\t\t\tc1.645-0.002,2.977-1.335,2.977-2.979V32.8c0-1.644-1.329-2.977-2.973-2.979L43.056,29.816z M10.235,22.706H5.392\n\t\t\t\tc-0.441,0-0.845-0.25-1.041-0.645c-0.195-0.396-0.15-0.868,0.117-1.219l3.562-4.677c0.304-0.4,0.777-0.632,1.28-0.632h0.926\n\t\t\t\tL10.235,22.706L10.235,22.706z M20.413,22.706h-7.264v-7.173h7.264V22.706z M31.231,22.15c-0.211,0.345-0.586,0.556-0.989,0.556\n\t\t\t\th-6.96v-7.173h4.192c0.604,0,1.155,0.335,1.433,0.872l2.367,4.611C31.46,21.376,31.444,21.805,31.231,22.15z"),t.append(n),t}}var V=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))};const R="http://127.0.0.1:3000",D=(t,n)=>V(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`${R}/engine?id=${t}&status=${n}`,{method:"PATCH"});if(!e.ok)throw new Error(`Error fetching cars: ${e.status}`);const r=yield e.json();return function(t){return null!==t&&"object"==typeof t&&"velocity"in t&&"distance"in t}(r)?r:void 0}catch(t){return void console.error("Error:",t)}})),_=t=>V(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`${R}/engine?id=${t}&status=drive`,{method:"PATCH"});if(!e.ok)throw new Error(`Error fetching cars: ${e.status}`);const r=yield e.json();return null!==(n=r)&&"object"==typeof n&&"success"in n?r:void 0}catch(t){return void console.error("Error:",t)}var n}));function X(t,n,e){const r=t.parentElement;if(r){const o=r.getBoundingClientRect().width-t.getBoundingClientRect().width,i=e/(900*n);return t.style.transform=`translateX(${o}px)`,t.style.transition=`transform ${i}s linear`,i}}function F(t){const n=t.getBoundingClientRect();t.style.transform=`translateX(${n.left}px)`,t.style.transition=""}function G(t){t.style.transform="translateX(0px)",t.style.transition=""}const J={winners:[],currentPage:1,totalWinners:0,sort:"id",order:"ASC"},U=[],q=t=>{U.push(t)},K=t=>{Object.assign(J,t);for(const t of U)t()};function Q(t){return null!==t&&"object"==typeof t&&"id"in t&&"wins"in t&&"time"in t}var Y=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))};const Z="http://127.0.0.1:3000",tt=(...t)=>Y(void 0,[...t],void 0,(function*(t=J.currentPage,n=J.sort,e=J.order){try{const r=yield fetch(`${Z}/winners?_page=${t}&_limit=10&_sort=${n}&_order=${e}`),o=Number(r.headers.get("X-Total-Count"));if(!r.ok)throw new Error(`Error fetching cars: ${r.status}`);const i=yield r.json();!function(t){return Array.isArray(t)&&t.every((t=>"object"==typeof t&&"id"in t&&"wins"in t&&"time"in t))}(i)?K({winners:[],totalWinners:0}):K({winners:i,totalWinners:o})}catch(t){K({winners:[],totalWinners:0}),console.error("Error:",t)}}));var nt=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))};class et extends i{constructor(t){super(t,"div","cars-container"),this.viewCars(),k((()=>{this.updateCars()}))}static selectHandlers(t){return nt(this,void 0,void 0,(function*(){try{const n=yield W(t);if(!n)throw new Error("car is undefined");I({updateInput:n.name,updateInputColor:n.color,updateState:"false",idCar:String(n.id)})}catch(t){console.error("Error get car:",t)}}))}static playHandlers(t){return nt(this,arguments,void 0,(function*(t,n="started"){try{const e=yield D(t,n);if(!e)throw new Error("startResponse is undefined");X(S[t],e.velocity,e.distance);const r=yield _(t);(null==r?void 0:r.success)||F(S[t])}catch(t){console.error("Error starting car:",t)}}))}static stopHandlers(t){return nt(this,arguments,void 0,(function*(t,n="stopped"){try{if(!(yield D(t,n)))throw new Error("stopResponse is undefined");G(S[t])}catch(t){console.error("Error stopping car:",t)}}))}static deleteHandlers(t){return nt(this,void 0,void 0,(function*(){try{yield(t=>H(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${N}/garage/${t}`,{method:"DELETE"});if(!n.ok)throw new Error(`Error fetching car: ${n.status}`);const e=yield n.json();return M(e)?e:void 0}catch(t){return void console.error("Error:",t)}})))(t),yield(t=>Y(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${Z}/winners/${t}`,{method:"DELETE"});if(!n.ok)throw new Error(`Error fetching car: ${n.status}`);const e=yield n.json();return Q(e)?e:void 0}catch(t){return void console.error("Error:",t)}})))(t),yield j(),yield tt()}catch(t){console.error("Error deleting car:",t)}}))}updateCars(){this.node.textContent="",this.viewCars()}viewCars(){const t=C.cars;for(const t in S)delete S[Number(t)];for(const n of t){const t=new i(this.node,"div","car-container"),e=new i(t.node,"div","controls-row"),r=new i(e.node,"button","select-button","ðŸ“");this.buttons.push(r.node);const o=new i(e.node,"button"," remove-button","âŒ");this.buttons.push(o.node);const s=new i(e.node,"button","play-button","â–¶ï¸");this.buttons.push(s.node);const a=new i(e.node,"button","stop-button","â¹ï¸");this.buttons.push(a.node);try{if(!n.id)throw new Error("carData.id is undefined");const c=n.id;r.setCallback("click",(()=>{et.selectHandlers(c)})),o.setCallback("click",(()=>{et.deleteHandlers(c)})),s.setCallback("click",(()=>{et.playHandlers(c),s.setAttribute("disabled","")})),a.setCallback("click",(()=>{et.stopHandlers(c),s.removeAttribute("disabled")})),new i(e.node,"span","car-name",n.name);const d=new i(t.node,"div","race-row"),u=z.createSvg();u.setAttribute("fill",`${n.color}`),S[c]=u,d.node.append(u),new i(d.node,"p","flag-icon","ðŸ")}catch(t){console.error("Error carData.id:",t)}}}}var rt=e(510),ot={};ot.styleTagTransform=g(),ot.setAttributes=h(),ot.insert=l().bind(null,"head"),ot.domAPI=d(),ot.insertStyleElement=v(),a()(rt.A,ot),rt.A&&rt.A.locals&&rt.A.locals;const it=["Mazda","Ford","BMW","Audi","Mercedes","Toyota","Honda","Chevrolet","Nissan","Volkswagen"],st=["6","Mustang","Civic","Corolla","Camry","Accord","X-Trail","X5","A4","Golf"];var at=e(378),ct={};ct.styleTagTransform=g(),ct.setAttributes=h(),ct.insert=l().bind(null,"head"),ct.domAPI=d(),ct.insertStyleElement=v(),a()(at.A,ct),at.A&&at.A.locals&&at.A.locals;class dt extends i{constructor(t,n){super(t,"dialog","dialog"),this.createModal(n)}closeModal(){this.node instanceof HTMLDialogElement&&(this.node.close(),this.node.remove())}createModal(t){const n=new i(this.node,"div","content");new i(n.node,"p","message",`${t.name} was finished first in ${t.time} seconds.`);const e=new i(n.node,"button","button close-button","Close");e.setAttribute("type","button"),e.setCallback("click",(()=>this.closeModal())),this.viewModal()}viewModal(){if(this.node instanceof HTMLDialogElement){const t=this.node;t.showModal(),t.addEventListener("cancel",(()=>{this.closeModal()})),t.addEventListener("click",(n=>{n.target===t&&this.closeModal()}))}}}var ut=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))};class lt extends i{constructor(t){super(t,"div","control-container"),this.createControlButtons()}static resetHandlers(t){return ut(this,arguments,void 0,(function*(t,n="stopped"){try{const e=t.map((t=>ut(this,void 0,void 0,(function*(){if(!(yield D(Number(t),n)))throw new Error("stopResponse is undefined");G(S[Number(t)])}))));yield Promise.all(e)}catch(t){console.error("Error stopping car:",t)}}))}startHandlers(t){return ut(this,arguments,void 0,(function*(t,n="started"){try{let e=!1;const o=t.map((t=>ut(this,void 0,void 0,(function*(){const o=yield D(Number(t),n);if(!o)throw new Error("startResponse is undefined");const i=X(S[Number(t)],o.velocity,o.distance),s=yield _(Number(t));(null==s?void 0:s.success)||F(S[Number(t)]),S[Number(t)].addEventListener("transitionend",(()=>{(()=>{ut(this,void 0,void 0,(function*(){var n;const o=S[Number(t)].getBoundingClientRect(),s=r(S[Number(t)].parentElement).getBoundingClientRect().width;if(o.right>=s&&!e){e=!0;const r={name:null===(n=C.cars.find((n=>n.id===Number(t))))||void 0===n?void 0:n.name,time:Number(null==i?void 0:i.toFixed(2))};new dt(document.body,r);const o=yield(t=>Y(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${Z}/winners/${t}`);if(!n.ok)throw new Error(`Error fetching car: ${n.status}`);const e=yield n.json();return Q(e)?e:void 0}catch(t){return void console.error("Error:",t)}})))(Number(t));if(o){const t={id:o.id,wins:o.wins+1,time:Math.min(Number(null==i?void 0:i.toFixed(2)),o.time)};o.id&&(yield((t,n)=>Y(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`${Z}/winners/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok)throw new Error(`Error fetching cars: ${e.status}`);const r=yield e.json();return Q(r)?r:void 0}catch(t){return void console.error("Error:",t)}})))(o.id,t))}else{const n={id:Number(t),wins:1,time:Number(null==i?void 0:i.toFixed(2))};yield(t=>Y(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${Z}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Error fetching cars: ${n.status}`);const e=yield n.json();return Q(e)?e:void 0}catch(t){return void console.error("Error:",t)}})))(n)}yield tt()}}))})()}))}))));yield Promise.allSettled(o),this.resetButton&&this.resetButton.removeAttribute("disabled")}catch(t){console.error("Error starting car:",t)}}))}createControlButtons(){this.startButton=new i(this.node,"button","start-button","Start"),this.buttons.push(this.startButton.node),this.startButton.setCallback("click",(()=>{this.startHandlers(Object.keys(S));for(const t of o)t.offAllButtons()})),this.resetButton=new i(this.node,"button","reset-button","Reset"),this.resetButton.setAttribute("disabled",""),this.resetButton.setCallback("click",(()=>{var t;lt.resetHandlers(Object.keys(S)),null===(t=this.resetButton)||void 0===t||t.node.setAttribute("disabled","");for(const t of o)t.onAllButtons()}));const t=new i(this.node,"button","generate-button","Generate cars");t.setCallback("click",(()=>{var t,n,e,r;t=void 0,n=[],r=function*(t=100){for(let n=0;n<t;n++)yield B({name:`${it[Math.floor(Math.random()*it.length)]} ${st[Math.floor(Math.random()*st.length)]}`,color:`#${Math.floor(16777215*Math.random()).toString(16)}`});yield j()},new((e=void 0)||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))})),this.buttons.push(t.node)}}var pt=e(185),ht={};ht.styleTagTransform=g(),ht.setAttributes=h(),ht.insert=l().bind(null,"head"),ht.domAPI=d(),ht.insertStyleElement=v(),a()(pt.A,ht),pt.A&&pt.A.locals&&pt.A.locals;var ft=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))};class vt extends i{constructor(t){var n;super(t,"div","input-container"),this.createInputElements(),n=()=>{this.updateInput()},T.push(n)}static inputHandlers(t,n){t.setCallback("input",(()=>{t.node instanceof HTMLInputElement&&($[n]=t.node.value)}))}static updateHandlers(t){return ft(this,void 0,void 0,(function*(){try{const n={name:$.updateInput,color:$.updateInputColor,id:Number($.idCar)};yield((t,n)=>H(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`${N}/garage/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok)throw new Error(`Error fetching cars: ${e.status}`);const r=yield e.json();return M(r)?r:void 0}catch(t){return void console.error("Error:",t)}})))(t,n),yield j(),I({updateInput:"",updateInputColor:"#ffffff",updateState:"true"})}catch(t){console.error("Error creating car:",t)}}))}updateInput(){this.node.textContent="",this.createInputElements()}createHandlers(){return ft(this,void 0,void 0,(function*(){const t={name:$.createInput,color:$.createInputColor};try{if(!t.name.trim())return;yield B(t),yield j(),$.createInput="",$.createInputColor="#ffffff",this.updateInput()}catch(t){console.error("Error creating car:",t)}}))}createInputElements(){const t=new i(this.node,"div","create"),n=new i(t.node,"input","input-create");n.setAttribute("type","text"),n.setAttribute("value",$.createInput);const e=new i(t.node,"input","input-color");e.setAttribute("type","color"),e.setAttribute("value",$.createInputColor);const r=new i(t.node,"button","create-button","Create");r.setCallback("click",(()=>{this.createHandlers()})),this.buttons.push(r.node);const o=new i(this.node,"div","update"),s=new i(o.node,"input","input-update");s.setAttribute("type","text"),s.setAttribute("value",$.updateInput);const a=new i(o.node,"input","input-color");a.setAttribute("type","color"),a.setAttribute("value",$.updateInputColor);const c=new i(o.node,"button","update-button","Update");c.setCallback("click",(()=>{vt.updateHandlers(Number($.idCar))})),"false"===$.updateState?(s.removeAttribute("disabled"),a.removeAttribute("disabled"),c.removeAttribute("disabled")):(s.setAttribute("disabled","true"),a.setAttribute("disabled","true"),c.setAttribute("disabled","true")),vt.inputHandlers(n,"createInput"),vt.inputHandlers(e,"createInputColor"),vt.inputHandlers(s,"updateInput"),vt.inputHandlers(a,"updateInputColor")}}var bt=e(125),gt={};gt.styleTagTransform=g(),gt.setAttributes=h(),gt.insert=l().bind(null,"head"),gt.domAPI=d(),gt.insertStyleElement=v(),a()(bt.A,gt),bt.A&&bt.A.locals&&bt.A.locals;var yt=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))};class wt extends i{constructor(t){super(t,"div","pagination-container"),this.createPagination(),k((()=>{this.updatePagination()}))}updatePagination(){this.node.textContent="",this.createPagination()}nextHandlers(){return yt(this,arguments,void 0,(function*(t=7){const n=Math.ceil(C.totalCars/t);try{C.currentPage<n&&(C.currentPage++,yield j(C.currentPage),this.updatePagination())}catch(t){console.error("Error switching to next page:",t)}}))}prevHandlers(){return yt(this,void 0,void 0,(function*(){try{C.currentPage>1&&(C.currentPage--,yield j(C.currentPage),this.updatePagination())}catch(t){console.error("Error switching to previous page:",t)}}))}createPagination(){const t=C.totalCars,n=C.currentPage,e=Math.ceil(t/7),r=new i(this.node,"button","prev-button","Prev");this.buttons.push(r.node),1===n&&r.setAttribute("disabled","true"),r.setCallback("click",(()=>{this.prevHandlers()})),new i(this.node,"p","page",`${n}`);const o=new i(this.node,"button","next-button","Next");this.buttons.push(o.node),(n===e||t<=7)&&o.setAttribute("disabled","true"),o.setCallback("click",(()=>{this.nextHandlers()})),new i(this.node,"p","title",`Garage(${t})`)}}var mt=e(514),xt={};xt.styleTagTransform=g(),xt.setAttributes=h(),xt.insert=l().bind(null,"head"),xt.domAPI=d(),xt.insertStyleElement=v(),a()(mt.A,xt),mt.A&&mt.A.locals&&mt.A.locals;class At extends i{constructor(t){super(t,"table","winners-table"),this.createTableWinners(),q((()=>{this.updateTableWinners()}))}static toggleSort(t){J.sort===t?J.order="ASC"===J.order?"DESC":"ASC":(J.sort=t,J.order="ASC"),tt(J.currentPage,J.sort,J.order)}updateTableWinners(){this.node.textContent="",this.createTableWinners()}createTableWinners(){return t=this,n=void 0,r=function*(){const t=new i(this.node,"thead"),n=new i(t.node,"tr");new i(n.node,"th","number-button","ID"),new i(n.node,"th","car-button","Car"),new i(n.node,"th","name-button","Name"),new i(n.node,"th","wins-button","Wins").setCallback("click",(()=>At.toggleSort("wins"))),new i(n.node,"th","best-button","Best time").setCallback("click",(()=>At.toggleSort("time")));const e=new i(this.node,"tbody"),r=J.winners;for(const t of r){const n=new i(e.node,"tr");new i(n.node,"td","number",`${t.id}`);const r=new i(n.node,"td","car-winners");try{if(!t.id)throw new Error("winnerData.id is undefined");const e=yield W(t.id);if(!e)throw new Error("winner is undefined");const o=z.createSvg();o.setAttribute("fill",`${e.color}`),r.node.append(o),new i(n.node,"td","name",e.name),new i(n.node,"td","wins",`${t.wins}`),new i(n.node,"td","time",`${t.time}`)}catch(t){console.error("Error carData.id or winner:",t)}}},new((e=void 0)||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}));var t,n,e,r}}var Ct=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))};class Et extends i{constructor(t){super(t,"div","pagination-container"),this.createPaginationWinners(),q((()=>{this.updatePaginationWinners()}))}updatePaginationWinners(){this.node.textContent="",this.createPaginationWinners()}nextHandlers(){return Ct(this,arguments,void 0,(function*(t=10){const n=Math.ceil(J.totalWinners/t);try{J.currentPage<n&&(J.currentPage++,yield tt(J.currentPage,J.sort,J.order),this.updatePaginationWinners())}catch(t){console.error("Error switching to next page:",t)}}))}prevHandlers(){return Ct(this,void 0,void 0,(function*(){try{J.currentPage>1&&(J.currentPage--,yield tt(J.currentPage,J.sort,J.order),this.updatePaginationWinners())}catch(t){console.error("Error switching to previous page:",t)}}))}createPaginationWinners(){const t=J.totalWinners,n=J.currentPage,e=Math.ceil(t/10),r=new i(this.node,"button","prev-button","Prev");1===n&&r.setAttribute("disabled","true"),r.setCallback("click",(()=>{this.prevHandlers()})),new i(this.node,"p","page",`${n}`);const o=new i(this.node,"button","next-button","Next");(n===e||t<=10)&&o.setAttribute("disabled","true"),o.setCallback("click",(()=>{this.nextHandlers()})),new i(this.node,"p","title",`Winners(${t})`)}}class Pt extends i{constructor(t){super(t,"div")}renderGarage(){new lt(this.node),this.paginationComponent=new wt(this.node),this.inputComponent=new vt(this.node),this.carsComponent=new et(this.node),this.carsComponent.updateCars(),this.paginationComponent.updatePagination(),this.inputComponent.updateInput()}renderWinners(){this.paginationWinners=new Et(this.node),this.paginationWinners.updatePaginationWinners(),this.tableWinners=new At(this.node),this.tableWinners.updateTableWinners()}destroyCurrentView(){this.node.textContent=""}}var kt=e(208),$t={};$t.styleTagTransform=g(),$t.setAttributes=h(),$t.insert=l().bind(null,"head"),$t.domAPI=d(),$t.insertStyleElement=v(),a()(kt.A,$t),kt.A&&kt.A.locals&&kt.A.locals,new class extends i{constructor(t){super(t),new A(this.node,this.updateView.bind(this)),this.init()}init(){return t=this,n=void 0,r=function*(){this.renderPages=new Pt(this.node),m.currentView="garage",yield j(),yield tt(),this.updateView()},new((e=void 0)||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}));var t,n,e,r}updateView(){var t,n,e;null===(t=this.renderPages)||void 0===t||t.destroyCurrentView(),"garage"===m.currentView?null===(n=this.renderPages)||void 0===n||n.renderGarage():"winners"===m.currentView&&(null===(e=this.renderPages)||void 0===e||e.renderWinners())}}(document.body)})();